<template>
  <div class="city">
    <div id="container"></div>
  </div>
</template>

<script>
export default {
  mounted() {
    window.onLoad = function() {
      // 5  js åŠ è½½å®Œæ¯•äº†ï¼ï¼ï¼
      var map = new AMap.Map("container", {
        // åœ°å›¾çš„ç¼©æ”¾å€æ•°
        zoom: 12,
        // è¦æ˜¾ç¤ºçš„ç»çº¬åº¦[ç»åº¦ï¼Œçº¬åº¦]
        center: [116.39, 39.9]
      });

      // 6 ä½¿ç”¨æ’ä»¶
      var toolbar = new AMap.ToolBar();
      // map.plugin(toolbar);
      map.addControl(toolbar);

      // 7  åˆ›å»ºä¸€ä¸ª ç‚¹æ ‡è®°
      // var marker = new AMap.Marker({
      //   // ç‚¹æ ‡è®°çš„åæ ‡
      //   position: new AMap.LngLat(116.39, 39.9), // ç»çº¬åº¦å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»çº¬åº¦æ„æˆçš„ä¸€ç»´æ•°ç»„[116.39, 39.9]
      //   // é¼ æ ‡ç§»å…¥çš„æ—¶å€™çš„æç¤º
      //   title: "åŒ—äº¬"
      // });
      // map.add(marker);

      // 8 è‡ªå®šä¹‰å†…å®¹ ç‚¹æ ‡è®°
      // var content =
      //   '<div style="background:red;" class="marker-route marker-marker-bus-from">ğŸ˜„</div>';

      // var marker = new AMap.Marker({
      //   content: content, // è‡ªå®šä¹‰ç‚¹æ ‡è®°è¦†ç›–ç‰©å†…å®¹
      //   position: [116.397428, 39.90923], // åŸºç‚¹ä½ç½®
      //   offset: new AMap.Pixel(-17, -42) // ç›¸å¯¹äºåŸºç‚¹çš„åç§»ä½ç½®
      // });
      // map.add(marker);

      // 9 ä½¿ç”¨ é©¾è½¦è§„åˆ’
      var driving = new AMap.Driving({
        // é©¾è½¦è·¯çº¿è§„åˆ’ç­–ç•¥ï¼ŒAMap.DrivingPolicy.LEAST_TIMEæ˜¯æœ€å¿«æ·æ¨¡å¼
        policy: AMap.DrivingPolicy.LEAST_TIME,
        // è®©åœ°å›¾ä½¿ç”¨ä¸Šé©¾è½¦è§„åˆ’
        map: map
      });

      // var startLngLat = [116.379028, 39.865042];
      // var endLngLat = [116.427281, 39.903719];

      var points = [
        { keyword: "å‰å±±å¹¼å„¿å›­ï¼ˆå…¬äº¤ç«™ï¼‰", city: "å¹¿å·" },
        { keyword: "å¹¿å·å¡”", city: "å¹¿å·" }
      ];

      driving.search(points, function(status, result) {
        // æœªå‡ºé”™æ—¶ï¼Œresultå³æ˜¯å¯¹åº”çš„è·¯çº¿è§„åˆ’æ–¹æ¡ˆ
      });
    };

    // 1 å®šä¹‰ é«˜åº¦åœ°å›¾ js è·¯å¾„  åŒæ—¶ä¸‹è½½äº†æ’ä»¶
    //  åŒæ—¶ä¸‹è½½äº† å…¶ä»–æ’ä»¶
    var url =
      "https://webapi.amap.com/maps?v=1.4.15&key=b329f3568c3769213b6cc011593bf89d&callback=onLoad&plugin=AMap.ToolBar,AMap.Driving";
    // 2 æ‰‹åŠ¨åˆ›å»ºäº†ä¸€ä¸ªscriptæ ‡ç­¾
    var jsapi = document.createElement("script");
    jsapi.charset = "utf-8";
    // 3 å®šä¹‰ scriptæ ‡ç­¾çš„ å¼•å…¥åœ°å€
    jsapi.src = url;
    // 4 æŠŠscriptæ ‡ç­¾ æ”¾å…¥åˆ° htmlæ ‡ç­¾çš„ headæ ‡ç­¾çš„ä¸­
    document.head.appendChild(jsapi);
  }
};
</script>

<style>
.city {
  width: 1000px;
  margin: 0 auto;
}
#container {
  width: 1000px;
  height: 600px;
}
</style>